// Copyright (c) 2022 F5, Inc. All rights reserved.
// Code generated by ves-gen-schema-go. DO NOT EDIT.

package billing

import (
	"bytes"
	"context"
	"fmt"
	io "io"
	"net/http"
	"strings"

	"github.com/gogo/protobuf/proto"
	"github.com/grpc-ecosystem/grpc-gateway/runtime"
	"google.golang.org/grpc"

	"gopkg.volterra.us/stdlib/client"
	"gopkg.volterra.us/stdlib/codec"
	"gopkg.volterra.us/stdlib/errors"
	"gopkg.volterra.us/stdlib/server"
	"gopkg.volterra.us/stdlib/svcfw"
)

var (
	_ = fmt.Sprintf("dummy for fmt import use")
)

// Create CustomPrivateCDNUsageAPI GRPC Client satisfying server.CustomClient
type CustomPrivateCDNUsageAPIGrpcClient struct {
	conn       *grpc.ClientConn
	grpcClient CustomPrivateCDNUsageAPIClient
	// map of rpc name to its invocation
	rpcFns map[string]func(context.Context, string, ...grpc.CallOption) (proto.Message, error)
}

func (c *CustomPrivateCDNUsageAPIGrpcClient) doRPCLilacCDNUsage(ctx context.Context, yamlReq string, opts ...grpc.CallOption) (proto.Message, error) {
	req := &LilacCDNMetricsRequest{}
	if err := codec.FromYAML(yamlReq, req); err != nil {
		return nil, fmt.Errorf("YAML Request %s is not of type *ves.io.schema.billing.LilacCDNMetricsRequest", yamlReq)
	}
	rsp, err := c.grpcClient.LilacCDNUsage(ctx, req, opts...)
	return rsp, err
}

func (c *CustomPrivateCDNUsageAPIGrpcClient) DoRPC(ctx context.Context, rpc string, opts ...server.CustomCallOpt) (proto.Message, error) {
	rpcFn, exists := c.rpcFns[rpc]
	if !exists {
		return nil, fmt.Errorf("Error, no such rpc %s", rpc)
	}
	cco := server.NewCustomCallOpts()
	for _, opt := range opts {
		opt(cco)
	}
	if cco.YAMLReq == "" {
		return nil, fmt.Errorf("Error, empty request body")
	}
	ctx = client.AddHdrsToCtx(cco.Headers, ctx)

	rsp, err := rpcFn(ctx, cco.YAMLReq, cco.GrpcCallOpts...)
	if err != nil {
		return nil, errors.Wrap(err, "Doing custom RPC using GRPC")
	}
	if cco.OutCallResponse != nil {
		cco.OutCallResponse.ProtoMsg = rsp
	}
	return rsp, nil
}

func NewCustomPrivateCDNUsageAPIGrpcClient(cc *grpc.ClientConn) server.CustomClient {
	ccl := &CustomPrivateCDNUsageAPIGrpcClient{
		conn:       cc,
		grpcClient: NewCustomPrivateCDNUsageAPIClient(cc),
	}
	rpcFns := make(map[string]func(context.Context, string, ...grpc.CallOption) (proto.Message, error))
	rpcFns["LilacCDNUsage"] = ccl.doRPCLilacCDNUsage

	ccl.rpcFns = rpcFns

	return ccl
}

// Create CustomPrivateCDNUsageAPI REST Client satisfying server.CustomClient
type CustomPrivateCDNUsageAPIRestClient struct {
	baseURL string
	client  http.Client
	// map of rpc name to its invocation
	rpcFns map[string]func(context.Context, *server.CustomCallOpts) (proto.Message, error)
}

func (c *CustomPrivateCDNUsageAPIRestClient) doRPCLilacCDNUsage(ctx context.Context, callOpts *server.CustomCallOpts) (proto.Message, error) {
	if callOpts.URI == "" {
		return nil, fmt.Errorf("Error, URI should be specified, got empty")
	}
	url := fmt.Sprintf("%s%s", c.baseURL, callOpts.URI)

	yamlReq := callOpts.YAMLReq
	req := &LilacCDNMetricsRequest{}
	if err := codec.FromYAML(yamlReq, req); err != nil {
		return nil, fmt.Errorf("YAML Request %s is not of type *ves.io.schema.billing.LilacCDNMetricsRequest: %s", yamlReq, err)
	}

	var hReq *http.Request
	hm := strings.ToLower(callOpts.HTTPMethod)
	switch hm {
	case "post", "put":
		jsn, err := codec.ToJSON(req, codec.ToWithUseProtoFieldName())
		if err != nil {
			return nil, errors.Wrap(err, "Custom RestClient converting YAML to JSON")
		}
		var op string
		if hm == "post" {
			op = http.MethodPost
		} else {
			op = http.MethodPut
		}
		newReq, err := http.NewRequest(op, url, bytes.NewBuffer([]byte(jsn)))
		if err != nil {
			return nil, errors.Wrapf(err, "Creating new HTTP %s request for custom API", op)
		}
		hReq = newReq
	case "get":
		newReq, err := http.NewRequest(http.MethodGet, url, nil)
		if err != nil {
			return nil, errors.Wrap(err, "Creating new HTTP GET request for custom API")
		}
		hReq = newReq
		q := hReq.URL.Query()
		_ = q
		q.Add("end_time", fmt.Sprintf("%v", req.EndTime))
		for _, item := range req.FieldSelector {
			q.Add("field_selector", fmt.Sprintf("%v", item))
		}
		for _, item := range req.Filter {
			q.Add("filter", fmt.Sprintf("%v", item))
		}
		for _, item := range req.GroupBy {
			q.Add("group_by", fmt.Sprintf("%v", item))
		}
		q.Add("namespace", fmt.Sprintf("%v", req.Namespace))
		q.Add("start_time", fmt.Sprintf("%v", req.StartTime))
		q.Add("step", fmt.Sprintf("%v", req.Step))

		hReq.URL.RawQuery += q.Encode()
	case "delete":
		newReq, err := http.NewRequest(http.MethodDelete, url, nil)
		if err != nil {
			return nil, errors.Wrap(err, "Creating new HTTP DELETE request for custom API")
		}
		hReq = newReq
	default:
		return nil, fmt.Errorf("Error, invalid/empty HTTPMethod(%s) specified, should be POST|DELETE|GET", callOpts.HTTPMethod)
	}
	hReq = hReq.WithContext(ctx)
	hReq.Header.Set("Content-Type", "application/json")
	client.AddHdrsToReq(callOpts.Headers, hReq)

	rsp, err := c.client.Do(hReq)
	if err != nil {
		return nil, errors.Wrap(err, "Custom API RestClient")
	}
	defer rsp.Body.Close()

	// checking whether the status code is a successful status code (2xx series)
	if rsp.StatusCode < 200 || rsp.StatusCode > 299 {
		body, err := io.ReadAll(rsp.Body)
		return nil, fmt.Errorf("Unsuccessful custom API %s on %s, status code %d, body %s, err %s", callOpts.HTTPMethod, callOpts.URI, rsp.StatusCode, body, err)
	}

	body, err := io.ReadAll(rsp.Body)
	if err != nil {
		return nil, errors.Wrap(err, "Custom API RestClient read body")
	}
	pbRsp := &LilacCDNMetricsResponse{}
	if err := codec.FromJSON(string(body), pbRsp); err != nil {
		return nil, errors.Wrapf(err, "JSON Response %s is not of type *ves.io.schema.billing.LilacCDNMetricsResponse", body)

	}
	if callOpts.OutCallResponse != nil {
		callOpts.OutCallResponse.ProtoMsg = pbRsp
		callOpts.OutCallResponse.JSON = string(body)
	}
	return pbRsp, nil
}

func (c *CustomPrivateCDNUsageAPIRestClient) DoRPC(ctx context.Context, rpc string, opts ...server.CustomCallOpt) (proto.Message, error) {
	rpcFn, exists := c.rpcFns[rpc]
	if !exists {
		return nil, fmt.Errorf("Error, no such rpc %s", rpc)
	}
	cco := server.NewCustomCallOpts()
	for _, opt := range opts {
		opt(cco)
	}

	rsp, err := rpcFn(ctx, cco)
	if err != nil {
		return nil, errors.Wrap(err, "Doing custom RPC using Rest")
	}
	return rsp, nil
}

func NewCustomPrivateCDNUsageAPIRestClient(baseURL string, hc http.Client) server.CustomClient {
	ccl := &CustomPrivateCDNUsageAPIRestClient{
		baseURL: baseURL,
		client:  hc,
	}

	rpcFns := make(map[string]func(context.Context, *server.CustomCallOpts) (proto.Message, error))
	rpcFns["LilacCDNUsage"] = ccl.doRPCLilacCDNUsage

	ccl.rpcFns = rpcFns

	return ccl
}

// Create customPrivateCDNUsageAPIInprocClient

// INPROC Client (satisfying CustomPrivateCDNUsageAPIClient interface)
type customPrivateCDNUsageAPIInprocClient struct {
	CustomPrivateCDNUsageAPIServer
}

func (c *customPrivateCDNUsageAPIInprocClient) LilacCDNUsage(ctx context.Context, in *LilacCDNMetricsRequest, opts ...grpc.CallOption) (*LilacCDNMetricsResponse, error) {
	ctx = server.ContextWithRpcFQN(ctx, "ves.io.schema.billing.CustomPrivateCDNUsageAPI.LilacCDNUsage")
	return c.CustomPrivateCDNUsageAPIServer.LilacCDNUsage(ctx, in)
}

func NewCustomPrivateCDNUsageAPIInprocClient(svc svcfw.Service) CustomPrivateCDNUsageAPIClient {
	return &customPrivateCDNUsageAPIInprocClient{CustomPrivateCDNUsageAPIServer: NewCustomPrivateCDNUsageAPIServer(svc)}
}

// RegisterGwCustomPrivateCDNUsageAPIHandler registers with grpc-gw with an inproc-client backing so that
// rest to grpc happens without a grpc.Dial (thus avoiding additional certs for mTLS)
func RegisterGwCustomPrivateCDNUsageAPIHandler(ctx context.Context, mux *runtime.ServeMux, svc interface{}) error {
	s, ok := svc.(svcfw.Service)
	if !ok {
		return fmt.Errorf("svc is not svcfw.Service")
	}
	return RegisterCustomPrivateCDNUsageAPIHandlerClient(ctx, mux, NewCustomPrivateCDNUsageAPIInprocClient(s))
}

// Create customPrivateCDNUsageAPISrv

// SERVER (satisfying CustomPrivateCDNUsageAPIServer interface)
type customPrivateCDNUsageAPISrv struct {
	svc svcfw.Service
}

func (s *customPrivateCDNUsageAPISrv) LilacCDNUsage(ctx context.Context, in *LilacCDNMetricsRequest) (*LilacCDNMetricsResponse, error) {
	ah := s.svc.GetAPIHandler("ves.io.schema.billing.CustomPrivateCDNUsageAPI")
	cah, ok := ah.(CustomPrivateCDNUsageAPIServer)
	if !ok {
		return nil, fmt.Errorf("ah %v is not of type *CustomPrivateCDNUsageAPIServer", ah)
	}

	var (
		rsp *LilacCDNMetricsResponse
		err error
	)

	if err := svcfw.FillOneofDefaultChoice(ctx, s.svc, in); err != nil {
		err = server.MaybePublicRestError(ctx, errors.Wrapf(err, "Filling oneof default choice"))
		return nil, server.GRPCStatusFromError(err).Err()
	}

	if s.svc.Config().EnableAPIValidation {
		if rvFn := s.svc.GetRPCValidator("ves.io.schema.billing.CustomPrivateCDNUsageAPI.LilacCDNUsage"); rvFn != nil {
			if verr := rvFn(ctx, in); verr != nil {
				err = server.MaybePublicRestError(ctx, errors.Wrapf(verr, "Validating Request"))
				return nil, server.GRPCStatusFromError(err).Err()
			}
		}
	}

	rsp, err = cah.LilacCDNUsage(ctx, in)
	if err != nil {
		return rsp, server.GRPCStatusFromError(server.MaybePublicRestError(ctx, err)).Err()
	}

	return rsp, nil
}

func NewCustomPrivateCDNUsageAPIServer(svc svcfw.Service) CustomPrivateCDNUsageAPIServer {
	return &customPrivateCDNUsageAPISrv{svc: svc}
}

var CustomPrivateCDNUsageAPISwaggerJSON string = `{
    "swagger": "2.0",
    "info": {
        "title": "Billing",
        "description": "Billing data can be broadly categorized into two buckets.\n1. Feature type - Duration for which the feature type was enabled in the site.\n2. Feature usage - Duration for which an instance or multiple instances per feature type were active.\nBoth feature type and the usage data are adjusted based on the Billing Quanta (BQ). For example, if the\nBQ is 1 hour, then even if the feature was enabled only for 1 minute, then it will be reported as 1 hour.",
        "version": "version not set"
    },
    "schemes": [
        "http",
        "https"
    ],
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "tags": [],
    "paths": {
        "/ves.io.schema/introspect/read/namespaces/{namespace}/billing/lilac_cdn_usage": {
            "post": {
                "summary": "Lilac CDN Usage ",
                "description": "Request to get CDN usage metrics for billing",
                "operationId": "ves.io.schema.billing.CustomPrivateCDNUsageAPI.LilacCDNUsage",
                "responses": {
                    "200": {
                        "description": "A successful response.",
                        "schema": {
                            "$ref": "#/definitions/billingLilacCDNMetricsResponse"
                        }
                    },
                    "401": {
                        "description": "Returned when operation is not authorized",
                        "schema": {
                            "format": "string"
                        }
                    },
                    "403": {
                        "description": "Returned when there is no permission to access resource",
                        "schema": {
                            "format": "string"
                        }
                    },
                    "404": {
                        "description": "Returned when resource is not found",
                        "schema": {
                            "format": "string"
                        }
                    },
                    "409": {
                        "description": "Returned when operation on resource is conflicting with current value",
                        "schema": {
                            "format": "string"
                        }
                    },
                    "429": {
                        "description": "Returned when operation has been rejected as it is happening too frequently",
                        "schema": {
                            "format": "string"
                        }
                    },
                    "500": {
                        "description": "Returned when server encountered an error in processing API",
                        "schema": {
                            "format": "string"
                        }
                    },
                    "503": {
                        "description": "Returned when service is unavailable temporarily",
                        "schema": {
                            "format": "string"
                        }
                    },
                    "504": {
                        "description": "Returned when server timed out processing request",
                        "schema": {
                            "format": "string"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "namespace",
                        "description": "Namespace\n\nx-example: \"default\"\nx-required\nNamespace scope of the metric request",
                        "in": "path",
                        "required": true,
                        "type": "string",
                        "x-displayname": "Namespace"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/billingLilacCDNMetricsRequest"
                        }
                    }
                ],
                "tags": [
                    "CustomPrivateCDNUsageAPI"
                ],
                "externalDocs": {
                    "description": "Examples of this operation",
                    "url": "https://docs.cloud.f5.com/docs-v2/platform/reference/api-ref/ves-io-schema-billing-customprivatecdnusageapi-lilaccdnusage"
                },
                "x-ves-proto-rpc": "ves.io.schema.billing.CustomPrivateCDNUsageAPI.LilacCDNUsage"
            },
            "x-displayname": "Custom Private API for CDN usage",
            "x-ves-proto-service": "ves.io.schema.billing.CustomPrivateCDNUsageAPI",
            "x-ves-proto-service-type": "CUSTOM_PRIVATE"
        }
    },
    "definitions": {
        "billingLilacCDNMetricsRequest": {
            "type": "object",
            "description": "Request to get Lilac CDN metrics",
            "title": "Lilac CDN Metrics Request",
            "x-displayname": "Lilac CDN Metrics Request",
            "x-ves-proto-message": "ves.io.schema.billing.LilacCDNMetricsRequest",
            "properties": {
                "end_time": {
                    "type": "string",
                    "description": " Format: unix_timestamp|rfc 3339\n\nExample: - \"1659758607\"-\n\nRequired: YES\n\nValidation Rules:\n  ves.io.schema.rules.message.required: true\n  ves.io.schema.rules.string.query_time: true\n",
                    "title": "End Time",
                    "x-displayname": "End Time",
                    "x-ves-example": "1659758607",
                    "x-ves-required": "true",
                    "x-ves-validation-rules": {
                        "ves.io.schema.rules.message.required": "true",
                        "ves.io.schema.rules.string.query_time": "true"
                    }
                },
                "field_selector": {
                    "type": "array",
                    "description": " Fields (Metrics) selected to be queried.\n\nRequired: YES\n\nValidation Rules:\n  ves.io.schema.rules.enum.in: [0,7]\n  ves.io.schema.rules.message.required: true\n",
                    "title": "Field Selector",
                    "items": {
                        "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricsFieldSelector"
                    },
                    "x-displayname": "Field Selector",
                    "x-ves-required": "true",
                    "x-ves-validation-rules": {
                        "ves.io.schema.rules.enum.in": "[0,7]",
                        "ves.io.schema.rules.message.required": "true"
                    }
                },
                "filter": {
                    "type": "array",
                    "description": " CDN Metrics filter options",
                    "title": "Metrics Filter options",
                    "items": {
                        "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricsFilter"
                    },
                    "x-displayname": "Metrics Filter"
                },
                "group_by": {
                    "type": "array",
                    "description": " Aggregate data by zero or more tags\n\nValidation Rules:\n  ves.io.schema.rules.enum.in: [5,6]\n",
                    "title": "Group By",
                    "items": {
                        "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricsTag"
                    },
                    "x-displayname": "Group By",
                    "x-ves-validation-rules": {
                        "ves.io.schema.rules.enum.in": "[5,6]"
                    }
                },
                "namespace": {
                    "type": "string",
                    "description": " Namespace scope of the metric request\n\nExample: - \"default\"-\n\nRequired: YES\n\nValidation Rules:\n  ves.io.schema.rules.message.required: true\n",
                    "title": "Namespace",
                    "x-displayname": "Namespace",
                    "x-ves-example": "default",
                    "x-ves-required": "true",
                    "x-ves-validation-rules": {
                        "ves.io.schema.rules.message.required": "true"
                    }
                },
                "start_time": {
                    "type": "string",
                    "description": " Format: unix_timestamp|rfc 3339\n\nExample: - \"1659758607\"-\n\nRequired: YES\n\nValidation Rules:\n  ves.io.schema.rules.message.required: true\n  ves.io.schema.rules.string.query_time: true\n",
                    "title": "Start Time",
                    "x-displayname": "Start Time",
                    "x-ves-example": "1659758607",
                    "x-ves-required": "true",
                    "x-ves-validation-rules": {
                        "ves.io.schema.rules.message.required": "true",
                        "ves.io.schema.rules.string.query_time": "true"
                    }
                },
                "step": {
                    "type": "string",
                    "description": " step is the resolution width, which determines the number of the data points [x-axis (time)] to be returned in\n the response. The timestamps in the response will be t1=start_time, t2=t1+step, ... tn=tn-1+step,\n where tn \u003c= end_time. Depending on the time range, the step has a minimum value (due to rollups).\n For e.g. for ranges in last one hr, step minimum is 5m, for ranges beyond a day, its 1h etc.\n Step value used is the max(\u003cmin-step-for-range\u003e, \u003cstep-value-in-request\u003e)\n Format: [0-9][smhd], where s - seconds, m - minutes, h - hours, d - days\n\n Optional: If not specified, then step size is evaluated to \u003cend_time - start_time\u003e\n\nExample: - \"1m\"-\n\nValidation Rules:\n  ves.io.schema.rules.string.query_step: true\n",
                    "title": "Step",
                    "x-displayname": "Step",
                    "x-ves-example": "1m",
                    "x-ves-validation-rules": {
                        "ves.io.schema.rules.string.query_step": "true"
                    }
                }
            }
        },
        "billingLilacCDNMetricsResponse": {
            "type": "object",
            "description": "CDN Metrics response message",
            "title": "Metrics Response",
            "x-displayname": "Metrics Response",
            "x-ves-proto-message": "ves.io.schema.billing.LilacCDNMetricsResponse",
            "properties": {
                "items": {
                    "type": "array",
                    "description": " CDN Metrics response data items. Each instance has response for a field queried.",
                    "title": "Metrics Response Data",
                    "items": {
                        "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricsResponseData"
                    },
                    "x-displayname": "Metrics Response data items"
                },
                "step": {
                    "type": "string",
                    "description": " The effective step used in the response. It could be higher than the requested step due to rollups.\n Format: [0-9][smhd], where s - seconds, m - minutes, h - hours, d - days\n\nExample: - \"5m\"-\n\nValidation Rules:\n  ves.io.schema.rules.string.time_interval: true\n",
                    "title": "Step",
                    "x-displayname": "Step",
                    "x-ves-example": "5m",
                    "x-ves-validation-rules": {
                        "ves.io.schema.rules.string.time_interval": "true"
                    }
                }
            }
        },
        "cdn_loadbalancerLilacCDNMetricUnit": {
            "type": "string",
            "description": "Metric Unit\n",
            "title": "Metric Unit",
            "enum": [
                "COUNT",
                "BYTES",
                "MILLISECONDS"
            ],
            "default": "COUNT",
            "x-displayname": "Metric Unit",
            "x-ves-proto-enum": "ves.io.schema.views.cdn_loadbalancer.LilacCDNMetricUnit"
        },
        "cdn_loadbalancerLilacCDNMetricsFieldSelector": {
            "type": "string",
            "description": "CDN Metric fields. Naming convention is \u003cfield\u003e_\u003caggregation\u003e\n\nREQUEST_SUCCESS computed from REQUEST_TOTAL - REQUEST_FAILED\nBandwidth computed from DATA_OUT\nBandwidth computed from DATA_IN",
            "title": "Metrics Field Selector options",
            "enum": [
                "REQUEST_TOTAL_SUM",
                "REQUEST_FAILED_SUM",
                "REQUEST_1XX_SUM",
                "REQUEST_2XX_SUM",
                "REQUEST_3XX_SUM",
                "REQUEST_4XX_SUM",
                "REQUEST_5XX_SUM",
                "DATA_OUT_SUM",
                "LATENCY_MEAN",
                "DATA_IN_SUM"
            ],
            "default": "REQUEST_TOTAL_SUM",
            "x-displayname": "Metrics Field Selector",
            "x-ves-proto-enum": "ves.io.schema.views.cdn_loadbalancer.LilacCDNMetricsFieldSelector"
        },
        "cdn_loadbalancerLilacCDNMetricsFilter": {
            "type": "object",
            "description": "CDN Metrics filter options",
            "title": "Metrics Filter options",
            "x-displayname": "Metrics Filter",
            "x-ves-proto-message": "ves.io.schema.views.cdn_loadbalancer.LilacCDNMetricsFilter",
            "properties": {
                "operator": {
                    "description": " Operators possible in filtering\n\nRequired: YES\n\nValidation Rules:\n  ves.io.schema.rules.message.required: true\n",
                    "title": "Metrics Operator Types",
                    "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricsOperatorType",
                    "x-displayname": "Metrics Operator Types",
                    "x-ves-required": "true",
                    "x-ves-validation-rules": {
                        "ves.io.schema.rules.message.required": "true"
                    }
                },
                "tag": {
                    "description": " Tags on which CDN metrics can be filtered by\n\nRequired: YES\n\nValidation Rules:\n  ves.io.schema.rules.message.required: true\n",
                    "title": "Metrics Filter Tag options",
                    "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricsTag",
                    "x-displayname": "Filter Tags",
                    "x-ves-required": "true",
                    "x-ves-validation-rules": {
                        "ves.io.schema.rules.message.required": "true"
                    }
                },
                "values": {
                    "type": "array",
                    "description": " Filter values\n\nExample: - \"[IN, US]\"-\n\nRequired: YES\n\nValidation Rules:\n  ves.io.schema.rules.message.required: true\n",
                    "title": "Filter values",
                    "items": {
                        "type": "string"
                    },
                    "x-displayname": "Filter values",
                    "x-ves-example": "[IN, US]",
                    "x-ves-required": "true",
                    "x-ves-validation-rules": {
                        "ves.io.schema.rules.message.required": "true"
                    }
                }
            }
        },
        "cdn_loadbalancerLilacCDNMetricsOperatorType": {
            "type": "string",
            "description": "Operators possible in filtering\n",
            "title": "Metrics Operator Types",
            "enum": [
                "OPERATOR_TYPE_IN",
                "OPERATOR_TYPE_NOT_IN"
            ],
            "default": "OPERATOR_TYPE_IN",
            "x-displayname": "Metrics Operator Types",
            "x-ves-proto-enum": "ves.io.schema.views.cdn_loadbalancer.LilacCDNMetricsOperatorType"
        },
        "cdn_loadbalancerLilacCDNMetricsResponseData": {
            "type": "object",
            "description": "CDN Metrics response data. This is specific to a metric field.",
            "title": "Metrics Response Data",
            "x-displayname": "Metrics Response Data",
            "x-ves-proto-message": "ves.io.schema.views.cdn_loadbalancer.LilacCDNMetricsResponseData",
            "properties": {
                "series": {
                    "type": "array",
                    "description": " CDN Metrics response series for the field in this message",
                    "title": "Metrics Series",
                    "items": {
                        "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricsResponseSeries"
                    },
                    "x-displayname": "Metrics Response Series"
                },
                "type": {
                    "description": " Metrics field for this response message",
                    "title": "Metrics Field Selector options",
                    "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricsFieldSelector",
                    "x-displayname": "Metrics Field Selector"
                },
                "unit": {
                    "description": " Metric Unit of the field in this message",
                    "title": "Metric Unit",
                    "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricUnit",
                    "x-displayname": "Metric Unit"
                }
            }
        },
        "cdn_loadbalancerLilacCDNMetricsResponseGroupBy": {
            "type": "object",
            "description": "CDN Metrics group by options",
            "title": "Metrics group by options",
            "x-displayname": "Metrics Group By",
            "x-ves-proto-message": "ves.io.schema.views.cdn_loadbalancer.LilacCDNMetricsResponseGroupBy",
            "properties": {
                "name": {
                    "description": " Tag on which CDN metric was requested to be grouped in request",
                    "title": "Metric Group-By Tags",
                    "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricsTag",
                    "x-displayname": "Group By Tags"
                },
                "value": {
                    "type": "string",
                    "description": " Group-By tag Value",
                    "title": "Group-By tag Value",
                    "x-displayname": "Group By Tag Value"
                }
            }
        },
        "cdn_loadbalancerLilacCDNMetricsResponseSeries": {
            "type": "object",
            "description": "CDN Metrics response series.\nEach series instance has data for a combination of group-by tag values.",
            "title": "Metrics Series",
            "x-displayname": "Metrics Response Series",
            "x-ves-proto-message": "ves.io.schema.views.cdn_loadbalancer.LilacCDNMetricsResponseSeries",
            "properties": {
                "group_by": {
                    "type": "array",
                    "description": " CDN Metrics group-by tag combination.",
                    "title": "Metrics group by options",
                    "items": {
                        "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricsResponseGroupBy"
                    },
                    "x-displayname": "Metrics Group By"
                },
                "value": {
                    "type": "array",
                    "description": " CDN Metrics data for the series.",
                    "title": "Metrics Response Value",
                    "items": {
                        "$ref": "#/definitions/cdn_loadbalancerLilacCDNMetricsResponseValue"
                    },
                    "x-displayname": "Metrics Response Value"
                }
            }
        },
        "cdn_loadbalancerLilacCDNMetricsResponseValue": {
            "type": "object",
            "description": "CDN Metrics response value",
            "title": "Metrics Response Value",
            "x-displayname": "Metrics Response Value",
            "x-ves-proto-message": "ves.io.schema.views.cdn_loadbalancer.LilacCDNMetricsResponseValue",
            "properties": {
                "timestamp": {
                    "type": "string",
                    "description": " Metric Timestamp in unix_timestamp",
                    "title": "Metric Timestamp",
                    "x-displayname": "Metric Timestamp"
                },
                "value": {
                    "type": "string",
                    "description": " Metric Value",
                    "title": "Metric Value",
                    "x-displayname": "Metric Value"
                }
            }
        },
        "cdn_loadbalancerLilacCDNMetricsTag": {
            "type": "string",
            "description": "Tags on which CDN metrics can be filtered or grouped by\n\nHIT|MISS\nTwo letter country code\nhttp_1_1|http_2_0 etc\ntlsv1_0|tlsv1_1|tlsv1_2 etc",
            "title": "Metrics Tag options",
            "enum": [
                "CDN_DISTRIBUTION_NAME",
                "CACHE_HIT_TYPE",
                "REQUEST_COUNTRY",
                "HTTP_VERSION",
                "TLS_VERSION",
                "POP_REGION",
                "POP"
            ],
            "default": "CDN_DISTRIBUTION_NAME",
            "x-displayname": "Tags",
            "x-ves-proto-enum": "ves.io.schema.views.cdn_loadbalancer.LilacCDNMetricsTag"
        }
    },
    "x-displayname": "Billing",
    "x-ves-proto-file": "ves.io/schema/billing/private_customapi_cdn_usage.proto"
}`
