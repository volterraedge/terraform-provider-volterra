// Copyright (c) 2022 F5, Inc. All rights reserved.
// Code generated by ves-gen-schema-go. DO NOT EDIT.

package report

import (
	"context"
	"fmt"
	"strings"

	"github.com/gogo/protobuf/proto"

	"gopkg.volterra.us/stdlib/codec"
	"gopkg.volterra.us/stdlib/db"
	"gopkg.volterra.us/stdlib/errors"
)

var (
	// dummy imports in case file has no message with Refs
	_ db.Interface
	_ = errors.Wrap
	_ = strings.Split
)

// augmented methods on protoc/std generated struct

func (m *ReportHeader) ToJSON() (string, error) {
	return codec.ToJSON(m)
}

func (m *ReportHeader) ToYAML() (string, error) {
	return codec.ToYAML(m)
}

func (m *ReportHeader) DeepCopy() *ReportHeader {
	if m == nil {
		return nil
	}
	ser, err := m.Marshal()
	if err != nil {
		return nil
	}
	c := &ReportHeader{}
	err = c.Unmarshal(ser)
	if err != nil {
		return nil
	}
	return c
}

func (m *ReportHeader) DeepCopyProto() proto.Message {
	if m == nil {
		return nil
	}
	return m.DeepCopy()
}

func (m *ReportHeader) Validate(ctx context.Context, opts ...db.ValidateOpt) error {
	return ReportHeaderValidator().Validate(ctx, m, opts...)
}

type ValidateReportHeader struct {
	FldValidators map[string]db.ValidatorFunc
}

func (v *ValidateReportHeader) ReportTitleValidationRuleHandler(rules map[string]string) (db.ValidatorFunc, error) {

	validatorFn, err := db.NewStringValidationRuleHandler(rules)
	if err != nil {
		return nil, errors.Wrap(err, "ValidationRuleHandler for report_title")
	}

	return validatorFn, nil
}

func (v *ValidateReportHeader) NamespaceValidationRuleHandler(rules map[string]string) (db.ValidatorFunc, error) {

	validatorFn, err := db.NewStringValidationRuleHandler(rules)
	if err != nil {
		return nil, errors.Wrap(err, "ValidationRuleHandler for namespace")
	}

	return validatorFn, nil
}

func (v *ValidateReportHeader) StartTimeValidationRuleHandler(rules map[string]string) (db.ValidatorFunc, error) {

	validatorFn, err := db.NewStringValidationRuleHandler(rules)
	if err != nil {
		return nil, errors.Wrap(err, "ValidationRuleHandler for start_time")
	}

	return validatorFn, nil
}

func (v *ValidateReportHeader) EndTimeValidationRuleHandler(rules map[string]string) (db.ValidatorFunc, error) {

	validatorFn, err := db.NewStringValidationRuleHandler(rules)
	if err != nil {
		return nil, errors.Wrap(err, "ValidationRuleHandler for end_time")
	}

	return validatorFn, nil
}

func (v *ValidateReportHeader) ReportFrequencyValidationRuleHandler(rules map[string]string) (db.ValidatorFunc, error) {

	var conv db.EnumConvFn
	conv = func(v interface{}) int32 {
		i := v.(ReportFrequency)
		return int32(i)
	}
	// ReportFrequency_name is generated in .pb.go
	validatorFn, err := db.NewEnumValidationRuleHandler(rules, ReportFrequency_name, conv)
	if err != nil {
		return nil, errors.Wrap(err, "ValidationRuleHandler for report_frequency")
	}

	return validatorFn, nil
}

func (v *ValidateReportHeader) GenerationTimeValidationRuleHandler(rules map[string]string) (db.ValidatorFunc, error) {

	validatorFn, err := db.NewStringValidationRuleHandler(rules)
	if err != nil {
		return nil, errors.Wrap(err, "ValidationRuleHandler for generation_time")
	}

	return validatorFn, nil
}

func (v *ValidateReportHeader) ReportSubTitleValidationRuleHandler(rules map[string]string) (db.ValidatorFunc, error) {

	validatorFn, err := db.NewStringValidationRuleHandler(rules)
	if err != nil {
		return nil, errors.Wrap(err, "ValidationRuleHandler for report_sub_title")
	}

	return validatorFn, nil
}

func (v *ValidateReportHeader) TenantFqdnValidationRuleHandler(rules map[string]string) (db.ValidatorFunc, error) {

	validatorFn, err := db.NewStringValidationRuleHandler(rules)
	if err != nil {
		return nil, errors.Wrap(err, "ValidationRuleHandler for tenant_fqdn")
	}

	return validatorFn, nil
}

func (v *ValidateReportHeader) Validate(ctx context.Context, pm interface{}, opts ...db.ValidateOpt) error {
	m, ok := pm.(*ReportHeader)
	if !ok {
		switch t := pm.(type) {
		case nil:
			return nil
		default:
			return fmt.Errorf("Expected type *ReportHeader got type %s", t)
		}
	}
	if m == nil {
		return nil
	}

	if fv, exists := v.FldValidators["end_time"]; exists {

		vOpts := append(opts, db.WithValidateField("end_time"))
		if err := fv(ctx, m.GetEndTime(), vOpts...); err != nil {
			return err
		}

	}

	if fv, exists := v.FldValidators["generation_time"]; exists {

		vOpts := append(opts, db.WithValidateField("generation_time"))
		if err := fv(ctx, m.GetGenerationTime(), vOpts...); err != nil {
			return err
		}

	}

	if fv, exists := v.FldValidators["namespace"]; exists {

		vOpts := append(opts, db.WithValidateField("namespace"))
		if err := fv(ctx, m.GetNamespace(), vOpts...); err != nil {
			return err
		}

	}

	if fv, exists := v.FldValidators["report_frequency"]; exists {

		vOpts := append(opts, db.WithValidateField("report_frequency"))
		if err := fv(ctx, m.GetReportFrequency(), vOpts...); err != nil {
			return err
		}

	}

	if fv, exists := v.FldValidators["report_sub_title"]; exists {

		vOpts := append(opts, db.WithValidateField("report_sub_title"))
		if err := fv(ctx, m.GetReportSubTitle(), vOpts...); err != nil {
			return err
		}

	}

	if fv, exists := v.FldValidators["report_title"]; exists {

		vOpts := append(opts, db.WithValidateField("report_title"))
		if err := fv(ctx, m.GetReportTitle(), vOpts...); err != nil {
			return err
		}

	}

	if fv, exists := v.FldValidators["start_time"]; exists {

		vOpts := append(opts, db.WithValidateField("start_time"))
		if err := fv(ctx, m.GetStartTime(), vOpts...); err != nil {
			return err
		}

	}

	if fv, exists := v.FldValidators["tenant_fqdn"]; exists {

		vOpts := append(opts, db.WithValidateField("tenant_fqdn"))
		if err := fv(ctx, m.GetTenantFqdn(), vOpts...); err != nil {
			return err
		}

	}

	return nil
}

// Well-known symbol for default validator implementation
var DefaultReportHeaderValidator = func() *ValidateReportHeader {
	v := &ValidateReportHeader{FldValidators: map[string]db.ValidatorFunc{}}

	var (
		err error
		vFn db.ValidatorFunc
	)
	_, _ = err, vFn
	vFnMap := map[string]db.ValidatorFunc{}
	_ = vFnMap

	vrhReportTitle := v.ReportTitleValidationRuleHandler
	rulesReportTitle := map[string]string{
		"ves.io.schema.rules.message.required": "true",
	}
	vFn, err = vrhReportTitle(rulesReportTitle)
	if err != nil {
		errMsg := fmt.Sprintf("ValidationRuleHandler for ReportHeader.report_title: %s", err)
		panic(errMsg)
	}
	v.FldValidators["report_title"] = vFn

	vrhNamespace := v.NamespaceValidationRuleHandler
	rulesNamespace := map[string]string{
		"ves.io.schema.rules.message.required": "true",
	}
	vFn, err = vrhNamespace(rulesNamespace)
	if err != nil {
		errMsg := fmt.Sprintf("ValidationRuleHandler for ReportHeader.namespace: %s", err)
		panic(errMsg)
	}
	v.FldValidators["namespace"] = vFn

	vrhStartTime := v.StartTimeValidationRuleHandler
	rulesStartTime := map[string]string{
		"ves.io.schema.rules.message.required": "true",
	}
	vFn, err = vrhStartTime(rulesStartTime)
	if err != nil {
		errMsg := fmt.Sprintf("ValidationRuleHandler for ReportHeader.start_time: %s", err)
		panic(errMsg)
	}
	v.FldValidators["start_time"] = vFn

	vrhEndTime := v.EndTimeValidationRuleHandler
	rulesEndTime := map[string]string{
		"ves.io.schema.rules.message.required": "true",
	}
	vFn, err = vrhEndTime(rulesEndTime)
	if err != nil {
		errMsg := fmt.Sprintf("ValidationRuleHandler for ReportHeader.end_time: %s", err)
		panic(errMsg)
	}
	v.FldValidators["end_time"] = vFn

	vrhReportFrequency := v.ReportFrequencyValidationRuleHandler
	rulesReportFrequency := map[string]string{
		"ves.io.schema.rules.enum.not_in":      "0",
		"ves.io.schema.rules.message.required": "true",
	}
	vFn, err = vrhReportFrequency(rulesReportFrequency)
	if err != nil {
		errMsg := fmt.Sprintf("ValidationRuleHandler for ReportHeader.report_frequency: %s", err)
		panic(errMsg)
	}
	v.FldValidators["report_frequency"] = vFn

	vrhGenerationTime := v.GenerationTimeValidationRuleHandler
	rulesGenerationTime := map[string]string{
		"ves.io.schema.rules.message.required": "true",
	}
	vFn, err = vrhGenerationTime(rulesGenerationTime)
	if err != nil {
		errMsg := fmt.Sprintf("ValidationRuleHandler for ReportHeader.generation_time: %s", err)
		panic(errMsg)
	}
	v.FldValidators["generation_time"] = vFn

	vrhReportSubTitle := v.ReportSubTitleValidationRuleHandler
	rulesReportSubTitle := map[string]string{
		"ves.io.schema.rules.message.required": "true",
	}
	vFn, err = vrhReportSubTitle(rulesReportSubTitle)
	if err != nil {
		errMsg := fmt.Sprintf("ValidationRuleHandler for ReportHeader.report_sub_title: %s", err)
		panic(errMsg)
	}
	v.FldValidators["report_sub_title"] = vFn

	vrhTenantFqdn := v.TenantFqdnValidationRuleHandler
	rulesTenantFqdn := map[string]string{
		"ves.io.schema.rules.message.required": "true",
	}
	vFn, err = vrhTenantFqdn(rulesTenantFqdn)
	if err != nil {
		errMsg := fmt.Sprintf("ValidationRuleHandler for ReportHeader.tenant_fqdn: %s", err)
		panic(errMsg)
	}
	v.FldValidators["tenant_fqdn"] = vFn

	return v
}()

func ReportHeaderValidator() db.Validator {
	return DefaultReportHeaderValidator
}
